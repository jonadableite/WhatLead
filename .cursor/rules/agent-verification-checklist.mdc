---
description: Checklist de verifica√ß√£o obrigat√≥rio para agentes antes de entregar qualquer solu√ß√£o
alwaysApply: true
---

# ‚úÖ Checklist de Verifica√ß√£o para Agentes

Este checklist **DEVE** ser executado antes de considerar qualquer tarefa como conclu√≠da.

## üîç Fase 1: Compreens√£o e Planejamento

### Antes de Come√ßar
- [ ] Li e compreendi a solicita√ß√£o do usu√°rio
- [ ] Consultei documenta√ß√£o relevante (`docs/`, `project-rules-enhanced.mdc`, `agent-verification-checklist.mdc`)
- [ ] Busquei c√≥digo existente similar (`codebase_search`)
- [ ] Identifiquei qual especialista √© necess√°rio (DDD, System Design, Engenharia, Arquitetura)
- [ ] Criei TODO list com etapas claras (`todo_write`)

### Contexto do Projeto
- [ ] Entendi que WhatLead √© SaaS de WhatsApp Marketing com automa√ß√£o, anti-ban, IA e aquecimento
- [ ] Identifiquei o dom√≠nio de neg√≥cio afetado (Automa√ß√£o, Prote√ß√£o, IA, Disparos, Analytics, Contas)
- [ ] Identifiquei o p√∫blico-alvo (MARKETER, BUSINESS_OWNER, AGENCY, ADMIN, SUPPORT)

---

## üíª Fase 2: Implementa√ß√£o

### Arquitetura em Camadas
- [ ] Respeitei a separa√ß√£o de camadas (Frontend ‚Üí Backend ‚Üí Business Logic ‚Üí Database)
- [ ] Frontend n√£o acessa Database diretamente
- [ ] Business Logic n√£o depende de Frontend
- [ ] N√£o criei depend√™ncias circulares

### TypeScript e Type Safety
- [ ] Nenhum uso de `any` ou `var`
- [ ] Todos os tipos explicitamente definidos
- [ ] Interfaces usadas ao inv√©s de types (exceto quando necess√°rio)
- [ ] Arrow functions usadas
- [ ] async/await para Promises
- [ ] Par√¢metros de objeto quando > 2 par√¢metros

### Valida√ß√£o e Seguran√ßa
- [ ] Inputs validados com Zod na camada tRPC
- [ ] Regras de neg√≥cio validadas na camada de Business Logic
- [ ] Permiss√µes validadas antes de opera√ß√µes
- [ ] Secrets n√£o expostos no c√≥digo
- [ ] Rate limiting implementado (se aplic√°vel a WhatsApp)

### Clean Code
- [ ] Fun√ß√µes pequenas (< 50 linhas, preferencialmente < 30)
- [ ] Early returns (evitado aninhamento de if/else)
- [ ] Magic numbers movidos para constantes
- [ ] Nomes descritivos (verbos para fun√ß√µes)
- [ ] DRY aplicado (sem duplica√ß√£o de c√≥digo)
- [ ] Vari√°veis declaradas pr√≥ximas ao uso

### Conven√ß√µes de Nomenclatura
- [ ] Classes/Interfaces: PascalCase
- [ ] Fun√ß√µes/Vari√°veis: camelCase
- [ ] Arquivos/Diret√≥rios: kebab-case
- [ ] Constantes: UPPER_SNAKE_CASE
- [ ] Fun√ß√µes s√£o verbos (n√£o substantivos)

### Logs e Observabilidade
- [ ] Logs estruturados com `traceId`
- [ ] Logs incluem `userId`, `campaignId`, `action`
- [ ] N√≠veis apropriados (info, warn, error)

### Prote√ß√£o Anti-Ban (se aplic√°vel)
- [ ] Rate limiting respeitado
- [ ] Comportamento humano simulado
- [ ] Status de contas monitorado
- [ ] Backoff exponencial implementado
- [ ] Sistema de aquecimento considerado

---

## üß™ Fase 3: Testes

### Cobertura
- [ ] Testes criados para novos routers/procedures
- [ ] Testes de integra√ß√£o criados (se aplic√°vel)
- [ ] Cobertura m√≠nima de 80% atingida
- [ ] Regras de neg√≥cio cr√≠ticas com 100% de cobertura

### Qualidade dos Testes
- [ ] Padr√£o Arrange, Act, Assert seguido
- [ ] Testes isolados e independentes
- [ ] Conex√µes (DB) encerradas ap√≥s testes
- [ ] Mocks apropriados usados

### Execu√ß√£o
- [ ] Todos os testes unit√°rios passando (`pnpm test:unit`)
- [ ] Todos os testes de integra√ß√£o passando (`pnpm test:integration`)
- [ ] Nenhum teste ignorado ou comentado

---

## üîß Fase 4: Qualidade e Valida√ß√£o

### Type-Check e Lint
- [ ] Type-check passando (`pnpm check-types`)
- [ ] Lint passando (`pnpm check`)
- [ ] Nenhum erro ou warning cr√≠tico

### Build
- [ ] Build bem-sucedido (`pnpm build`)
- [ ] Nenhum erro de compila√ß√£o
- [ ] Migrations aplicadas (se aplic√°vel)

### C√≥digo Completo
- [ ] C√≥digo √© completo e profissional (n√£o b√°sico)
- [ ] Tratamento de erros implementado
- [ ] Edge cases considerados
- [ ] Performance otimizada (queries, pagina√ß√£o, etc.)

---

## üìö Fase 5: Documenta√ß√£o

### Atualiza√ß√£o de Documentos
- [ ] README/docs atualizados (se comportamento mudou)
- [ ] tRPC routers documentados (se novos procedures)
- [ ] Coment√°rios no c√≥digo quando necess√°rio
- [ ] Decis√µes arquiteturais documentadas (ADRs se complexas)
- [ ] Notion atualizado (se feature significativa implementada) - Ver `@notion-sync.mdc`
- [ ] `docs/NOTION_PLANNING.md` atualizado com progresso

### Documenta√ß√£o de C√≥digo
- [ ] Interfaces e tipos bem documentados
- [ ] Fun√ß√µes complexas com coment√°rios explicativos
- [ ] Exemplos de uso quando relevante

---

## üöÄ Fase 6: Entrega

### Resposta ao Usu√°rio
- [ ] Resposta em Portugu√™s
- [ ] Resumo claro das mudan√ßas
- [ ] Lista de arquivos alterados
- [ ] Status dos testes executados
- [ ] Pr√≥ximos passos (se aplic√°vel)
- [ ] Cita√ß√µes de arquivos/trechos relevantes

### Checklist Final
- [ ] TODOS os itens acima marcados como conclu√≠dos
- [ ] Nenhum item cr√≠tico pendente
- [ ] C√≥digo pronto para revis√£o/deploy

---

## ‚ö†Ô∏è Itens Cr√≠ticos (Bloqueadores)

Se algum destes itens n√£o estiver completo, a entrega **N√ÉO** deve ser considerada:

1. ‚ùå Uso de `any` ou `var`
2. ‚ùå Viola√ß√£o da Arquitetura em Camadas
3. ‚ùå Testes n√£o criados/atualizados
4. ‚ùå Cobertura < 80% em c√≥digo cr√≠tico
5. ‚ùå Type-check ou lint falhando
6. ‚ùå Secrets expostos
7. ‚ùå Valida√ß√£o de inputs ausente
8. ‚ùå Logs sem traceId (quando aplic√°vel)
9. ‚ùå Rate limiting ignorado (se aplic√°vel a WhatsApp)
10. ‚ùå Sistema anti-ban n√£o considerado (se aplic√°vel)

---

## üìù Template de Resposta Final

```markdown
### ‚úÖ Resumo
[Breve descri√ß√£o das mudan√ßas implementadas]

### üìÅ Arquivos Alterados
- `caminho/arquivo.ts` ‚Äì [motivo da altera√ß√£o]
- `caminho/outro-arquivo.ts` ‚Äì [motivo da altera√ß√£o]

### üß™ Testes
- ‚úÖ Testes unit√°rios: [status]
- ‚úÖ Testes de integra√ß√£o: [status]
- ‚úÖ Cobertura: [X]% (m√≠nimo 80%)

### ‚úÖ Valida√ß√µes
- ‚úÖ Type-check: Passando
- ‚úÖ Lint: Passando
- ‚úÖ Build: Bem-sucedido

### üìö Documenta√ß√£o
- [ ] README/docs atualizados
- [ ] tRPC routers atualizados
- [ ] Decis√µes arquiteturais documentadas

### üöÄ Pr√≥ximos Passos
[Se aplic√°vel, pr√≥ximos passos ou melhorias sugeridas]
```

---

**IMPORTANTE**: Este checklist √© obrigat√≥rio. N√£o entregue c√≥digo sem completar todos os itens relevantes.
